<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø§Ù„Ø´Ø§Øª - Ø´Ø§Øª Ø¹Ø±Ø¨ÙŠ</title>
  <link rel="icon" href="/favicon.ico.png" type="image/png">
  <link rel="apple-touch-icon" href="/favicon.ico.png">
 <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Moh Chat",
  "url": "https://chat-arabi-1.onrender.com",
  "publisher": {
    "@type": "Organization",
    "logo": "https://chat-arabi-1.onrender.com/favicon.ico.png"
  }
}
</script>
  <link rel="stylesheet" href="chat.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="/socket.io/socket.io.js"></script>
  <style>
    /* Ø£Ù†Ù…Ø§Ø· Ø³Ø±ÙŠØ¹Ø© Ù„Ù„ÙˆØ­Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (ÙŠÙ…ÙƒÙ†Ùƒ Ù†Ù‚Ù„Ù‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹ Ø¥Ù„Ù‰ chat.css) */
    .conversations-panel, .friend-requests-panel, .reports-panel {
      position: fixed;
      top: 60px;
      right: 20px;
      width: 320px;
      max-height: 80vh;
      background: #1e293b;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
      z-index: 1000;
      overflow-y: auto;
      padding: 15px;
      color: white;
      display: none;
    }
    .panel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      border-bottom: 1px solid #334155;
      padding-bottom: 10px;
    }
    .panel-header h3 { margin: 0; font-size: 1.2rem; }
    .close-panel { cursor: pointer; font-size: 1.5rem; }
    .conversation-item, .request-item, .report-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px;
      border-radius: 8px;
      margin-bottom: 8px;
      background: #0f172a;
      cursor: pointer;
      transition: background 0.2s;
    }
    .conversation-item:hover, .request-item:hover, .report-item:hover {
      background: #1e40af;
    }
    .conversation-item img, .request-item img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
    }
    .action-btn-small {
      padding: 6px 12px;
      font-size: 0.85rem;
      border-radius: 6px;
      border: none;
      cursor: pointer;
    }
    .accept-btn { background: #10b981; color: white; }
    .reject-btn { background: #ef4444; color: white; }
    .report-item .reporter { font-weight: bold; color: #fbbf24; }
  </style>
</head>
<body>
  <header>
    <div class="header-left">
      <h1>Ø´Ø§Øª Ø¹Ø±Ø¨ÙŠ</h1>
      <div class="header-icons">
        <button class="icon-btn" id="privateMsgBtn" title="Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø§ØµØ©"><i class="fas fa-envelope"></i></button>
        <button class="icon-btn" id="friendReqBtn" title="Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØµØ¯Ø§Ù‚Ø©">
          <i class="fas fa-user-plus"></i>
          <span id="friendReqBadge" class="badge">0</span>
        </button>
        <button class="icon-btn" id="notificationsBtn" title="Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª"><i class="fas fa-bell"></i></button>
        <button class="icon-btn" id="reportsBtn" title="Ø§Ù„Ø¥Ø¨Ù„Ø§ØºØ§Øª"><i class="fas fa-flag"></i></button>
        <!-- Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© -->
        <button class="icon-btn" id="hideUsersPanelBtn" title="Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†">
          <i class="fas fa-eye-slash"></i>
        </button>
        <button class="icon-btn" id="showUsersPanelBtn" title="Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†" style="display:none;">
          <i class="fas fa-users"></i>
        </button>
        <!-- Ø²Ø± Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ -->
        <button class="icon-btn" id="shopBtn" title="Ø§Ù„Ù…ØªØ¬Ø±">
          <i class="fas fa-shopping-cart"></i>
        </button>
        <!-- Ø²Ø± Ù†Ù‚Ø§Ø·ÙŠ ÙˆÙ…Ø³ØªÙˆØ§ÙŠ (Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©) -->
        <button class="icon-btn" id="myLevelBtn" title="Ù†Ù‚Ø§Ø·ÙŠ ÙˆÙ…Ø³ØªÙˆØ§ÙŠ">
          <i class="fas fa-star"></i>
          <span class="level-text">Ù…Ø³ØªÙˆØ§ÙŠ</span>
        </button>
      </div>
    </div>
    <div style="display: flex; align-items: center; gap: 15px;">
      <div id="profileBtn">
        <img id="avatar" src="https://via.placeholder.com/40" alt="Ø¨Ø±ÙˆÙØ§ÙŠÙ„">
      </div>
      <button id="logoutBtn" class="logout-btn" title="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬">
        <i class="fas fa-sign-out-alt"></i> Ø®Ø±ÙˆØ¬
      </button>
    </div>
  </header>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- Ø§Ù„Ù„ÙˆØ­Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø§Ù„ØªÙŠ Ø·Ù„Ø¨ØªÙ‡Ø§ -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

  <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
  <div id="conversationsPanel" class="conversations-panel">
    <div class="panel-header">
      <h3>Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ø§Ù„Ø®Ø§ØµØ©</h3>
      <span class="close-panel" onclick="document.getElementById('conversationsPanel').style.display='none'">Ã—</span>
    </div>
    <div id="conversationsList"></div>
  </div>

  <!-- Ù„ÙˆØ­Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØµØ¯Ø§Ù‚Ø© -->
  <div id="friendRequestsPanel" class="friend-requests-panel">
    <div class="panel-header">
      <h3>Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØµØ¯Ø§Ù‚Ø©</h3>
      <span class="close-panel" onclick="document.getElementById('friendRequestsPanel').style.display='none'">Ã—</span>
    </div>
    <div id="friendRequestsList"></div>
  </div>

  <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¨Ù„Ø§ØºØ§Øª -->
  <div id="reportsPanel" class="reports-panel">
    <div class="panel-header">
      <h3>Ø§Ù„Ø¥Ø¨Ù„Ø§ØºØ§Øª Ø§Ù„ÙˆØ§Ø±Ø¯Ø©</h3>
      <span class="close-panel" onclick="document.getElementById('reportsPanel').style.display='none'">Ã—</span>
    </div>
    <div id="reportsList"></div>
  </div>

  <div class="chat-main">
    <div id="chatWindow"></div>
    <div id="usersPanel">
      <h3>Ø§Ù„Ù…ØªØµÙ„ÙˆÙ† <span id="userCount">0</span></h3>
      <div id="usersList"></div>
    </div>
  </div>

  <form id="messageForm">
    <input type="text" id="messageInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..." autocomplete="off" required>
    <button type="button" id="imageUploadBtn" class="emoji-btn" title="Ø¥Ø±Ø³Ø§Ù„ ØµÙˆØ±Ø©" onclick="document.getElementById('imageInput').click();">
      <i class="fas fa-image"></i>
    </button>
    <input type="file" id="imageInput" accept="image/*" style="display:none;">
    <button type="button" id="emojiBtn" class="emoji-btn" title="Ø§Ø®ØªØ± Ø¥ÙŠÙ…ÙˆØ¬ÙŠ">ğŸ˜Š</button>
    <button type="submit">Ø¥Ø±Ø³Ø§Ù„</button>
  </form>

  <div id="emojiPicker" class="emoji-picker hidden">
    <div class="emoji-tabs">
      <button class="emoji-tab active" data-tab="common">Ø§Ù„Ø£ÙƒØ«Ø± Ø§Ø³ØªØ®Ø¯Ø§Ù…Ø§Ù‹</button>
      <button class="emoji-tab" data-tab="animated">Ù…ØªØ­Ø±ÙƒØ©</button>
    </div>
    <div class="emoji-content">
      <div id="tab-common" class="emoji-grid">
        ğŸ˜Š ğŸ˜‚ ğŸ˜ â¤ï¸ ğŸ”¥ ğŸ‘ ğŸ‘ ğŸ™Œ âœ¨ ğŸŒŸ ğŸ˜ ğŸ˜­ ğŸ¥º ğŸ¤© ğŸ¥³ ğŸ‰ ğŸ‚ ğŸ âš¡ ğŸ’¥ ğŸ’¯
        â¤ï¸â€ğŸ”¥ ğŸ«¶ ğŸ¥° ğŸ˜˜ ğŸ˜‹ ğŸ¤¤ ğŸ˜´ ğŸ˜· ğŸ¤¢ ğŸ¤® ğŸ¥µ ğŸ¥¶ ğŸ¤¯ ğŸ¤” ğŸ¤« ğŸ¤­ ğŸ§
        ğŸ‘€ ğŸ‘„ ğŸ’‹ ğŸ«¦ ğŸ‘… ğŸ§  ğŸ«€ ğŸ« ğŸ¦· ğŸ¦´ ğŸ‘£ ğŸ–ï¸ âœŒï¸ ğŸ¤Ÿ ğŸ¤˜ ğŸ‘Œ ğŸ‘ˆ ğŸ‘‰ â˜ï¸
        ğŸ™ ğŸ¤² ğŸ‘ ğŸ‘ ğŸ¤ ğŸ’ª âœŠ ğŸ‘Š ğŸ¤› ğŸ¤œ ğŸ‘‹ ğŸ–– ğŸ¤™ ğŸ–•
      </div>
      <div id="tab-animated" class="emoji-grid animated-emojis hidden">
        <img src="https://www.allsmileys.com/files/kolobok/vishenk/25.gif" alt="Ù‚ÙˆØ©" title="Ù†Ù‚ÙˆØ©">
        <img src="https://www.allsmileys.com/files/kolobok/vishenk/26.gif" alt="Ù‚Ù„Ø¨" title="Ù‚Ù„Ø¨">
        <img src="https://www.allsmileys.com/files/kolobok/vishenk/27.gif" alt="Ø­Ø²ÙŠÙ†" title="Ø­Ø²ÙŠÙ†">
        <img src="https://www.allsmileys.com/files/kolobok/vishenk/11.gif" alt="Ø§Ù‡Ø¯ÙŠÙ‡" title="Ù‡Ø¯ÙŠÙ‡">
        <img src="https://www.allsmileys.com/files/kolobok/vishenk/9.gif" alt="Ù‚Ø¨Ù„Ù‡" title="Ù‚Ø¨Ù„Ù‡">
        <img src="https://www.allsmileys.com/files/kolobok/vishenk/28.gif" alt="Ø§Ø³ØªØ­Ù…Ø§Ù…" title="Ø§Ø³ØªØ­Ù…Ø§Ù…">
        <img src="https://www.allsmileys.com/files/kolobok/vishenk/4.gif" alt="ØµÙˆØ±Ù‡" title="ØµÙˆØ±Ù‡">
        <img src="https://www.allsmileys.com/files/kolobok/vishenk/2.gif" alt="Ø¯Ø±Ø§Ø³Ù‡" title="Ø¯Ø±Ø§Ø³Ù‡">
      </div>
    </div>
  </div>

  <div id="myProfilePanel" class="profile-panel">
    <div class="profile-header">
      <h3>Ø¨Ø±ÙˆÙØ§ÙŠÙ„Ùƒ</h3>
      <span id="closeMyProfile" class="close-panel">Ã—</span>
    </div>
    <div class="profile-cover-section">
      <div class="cover-photo" id="myCoverPhoto" style="background-image: url('https://via.placeholder.com/800x200/0f172a/ffffff?text=Ø®Ù„ÙÙŠØªÙƒ+Ù‡Ù†Ø§');"></div>
      <div class="profile-cover-overlay">
        <label for="coverUpload" class="change-cover-btn">
          <i class="fas fa-camera"></i> ØªØºÙŠÙŠØ± Ø§Ù„Ø®Ù„ÙÙŠØ©
        </label>
        <input type="file" id="coverUpload" accept="image/*" style="display:none;">
      </div>
    </div>
    <div class="profile-body">
      <div class="avatar-container">
        <img id="myProfileAvatar" src="https://via.placeholder.com/90" alt="ØµÙˆØ±ØªÙƒ">
        <label for="avatarUpload" class="change-avatar">
          <i class="fas fa-camera"></i>
        </label>
        <input type="file" id="avatarUpload" accept="image/*" style="display:none;">
      </div>
      <h4 id="myProfileUsername">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</h4>
    </div>
    <div class="profile-tabs">
      <button class="tab-btn active"><i class="fas fa-trophy"></i> Ø§Ù„Ù…Ø²ÙŠØ¯</button>
      <button class="tab-btn"><i class="fas fa-star"></i> Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª</button>
      <button class="tab-btn"><i class="fas fa-gift"></i> Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§</button>
      <button class="tab-btn"><i class="fas fa-cog"></i> Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
    </div>
    <div class="profile-tab-content">
      <ul>
        <li><i class="fas fa-edit"></i> ØªØ­Ø±ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</li>
        <li><i class="fas fa-user-edit"></i> ØªØºÙŠÙŠØ± Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</li>
        <li><i class="fas fa-heart"></i> ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„Ø©</li>
        <li><i class="fas fa-palette"></i> Ù„ÙˆÙ† Ø§Ù„Ø®Ø·</li>
        <li><i class="fas fa-volume-up"></i> Ø§Ù„Ø£ØµÙˆØ§Øª</li>
        <li><i class="fas fa-desktop"></i> Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§Ø³ØªØ§ÙŠÙ„</li>
      </ul>
    </div>
  </div>

  <div id="shopPanel" class="shop-panel" style="display:none;">
    <div class="shop-header">
      <h3>Ø§Ù„Ù…ØªØ¬Ø±</h3>
      <span id="closeShop" class="close-panel">Ã—</span>
    </div>
    <div class="shop-body">
      <h4>Ø±ØµÙŠØ¯ Ù†Ù‚Ø§Ø·Ùƒ: <span id="myPoints">0</span></h4>
  
      <div class="shop-items">
        <!-- Ø³ÙˆØ¨Ø± Ø£Ø¯Ù…Ù† -->
        <div class="shop-item">
          <div class="item-info">
            <span class="badge superadmin">Ø³ÙˆØ¨Ø± Ø£Ø¯Ù…Ù† âš™ï¸</span>
            <span class="price">5000 Ù†Ù‚Ø·Ø©</span>
          </div>
          <button class="buy-btn" data-role="superadmin" data-price="5000">Ø´Ø±Ø§Ø¡</button>
        </div>
        <!-- Ø£Ø¯Ù…Ù† -->
        <div class="shop-item">
          <div class="item-info">
            <span class="badge admin">Ø£Ø¯Ù…Ù† ğŸ”°</span>
            <span class="price">3000 Ù†Ù‚Ø·Ø©</span>
          </div>
          <button class="buy-btn" data-role="admin" data-price="3000">Ø´Ø±Ø§Ø¡</button>
        </div>
        <!-- Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ… -->
        <div class="shop-item">
          <div class="item-info">
            <span class="badge premium">Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ… ğŸ’</span>
            <span class="price">1500 Ù†Ù‚Ø·Ø©</span>
          </div>
          <button class="buy-btn" data-role="premium" data-price="1500">Ø´Ø±Ø§Ø¡</button>
        </div>
        <!-- VIP -->
        <div class="shop-item">
          <div class="item-info">
            <span class="badge vip">VIP â˜…</span>
            <span class="price">800 Ù†Ù‚Ø·Ø©</span>
          </div>
          <button class="buy-btn" data-role="vip" data-price="800">Ø´Ø±Ø§Ø¡</button>
        </div>
      </div>
    </div>
  </div>

  <div id="levelPointsPanel" class="level-panel hidden">
    <div class="level-panel-content">
      <div class="level-header">
        <h3>Ù†Ù‚Ø§Ø·ÙŠ ÙˆÙ…Ø³ØªÙˆØ§ÙŠ</h3>
        <span class="close-level-panel">Ã—</span>
      </div>
   
      <div class="level-main-info">
        <div class="level-circle">
          <span class="current-level">1</span>
          <span class="level-label">Ø§Ù„Ù…Ø³ØªÙˆÙ‰</span>
        </div>
     
        <div class="points-info">
          <div class="points-number">
            <span id="myRealPoints">1</span>
          </div>
          <div class="points-label">Ù†Ù‚Ø·Ø©</div>
        </div>
      </div>
      <div class="level-progress">
        <div class="progress-bar">
          <div class="progress-fill" style="width: 0%"></div>
        </div>
        <div class="progress-text">
          <span>0</span> / <span id="nextLevelPoints">100</span> Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ
        </div>
      </div>
    </div>
  </div>

  <div id="otherUserProfileModal" class="other-profile-modal hidden">
    <div class="modal-content">
      <span class="close-modal" onclick="closeOtherUserProfile()">Ã—</span>
      <div class="profile-cover" id="otherUserCover"></div>
      <div class="profile-header-info">
        <img id="otherUserAvatarLarge" src="https://via.placeholder.com/140" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" class="large-avatar">
        <div class="user-info-text">
          <h2 id="otherUserDisplayName">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</h2>
          <p id="otherUserStatus" class="status-text">We will meet in Paradise</p>
        </div>
      </div>
      <div class="profile-actions">
        <button class="action-btn msg-btn" id="sendPrivateMsgBtn">Ø±Ø³Ø§Ù„Ø© Ø®Ø§ØµØ©</button>
        <button class="action-btn friend-btn" id="addFriendFromProfile">Ø¥Ø¶Ø§ÙØ© ØµØ¯ÙŠÙ‚</button>
        <button class="action-btn report-btn">Ø¥Ø¨Ù„Ø§Øº</button>
      </div>
      <div class="profile-details">
        <div class="detail-item">
          <span>Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ù„Ù</span>
          <span id="otherProfileUrl">https://chat.arabi.com/u/...</span>
        </div>
        <div class="detail-item">
          <span>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…</span>
          <span id="otherJoinDate">2026-01-05</span>
        </div>
        <div class="detail-item">
          <span>Ø§Ù„Ø¨Ù„Ø¯</span>
          <span id="otherCountry">Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</span>
        </div>
        <div class="detail-item">
          <span>Ø¢Ø®Ø± ØªÙˆØ§Ø¬Ø¯</span>
          <span id="otherLastSeen">Ø§Ù„Ø¢Ù†</span>
        </div>
        <div class="detail-item">
          <span>Ø§Ù„Ù†Ù‚Ø§Ø·</span>
          <span id="otherPoints">1821</span>
        </div>
        <div id="adminRankControls" style="margin-top: 15px; padding-top: 15px; border-top: 1px dashed #ccc; text-align: center; display: none;">
            <button onclick="toggleRankList()" style="background:#fbbf24; color:black; border:none; padding:10px 20px; border-radius:8px; cursor:pointer; font-weight:bold; width:100%; display:flex; align-items:center; justify-content:center; gap:8px;">
                <i class="fas fa-gift"></i> Ø¥Ù‡Ø¯Ø§Ø¡ Ø±ØªØ¨Ø©
            </button>
            <div id="ranksListMenu" style="display:none; margin-top:10px; background:rgba(0,0,0,0.05); padding:10px; border-radius:8px; grid-template-columns: 1fr 1fr; gap:8px;">
                <button onclick="setUserRole(document.getElementById('otherUserDisplayName').textContent, 'superadmin')" style="background:#6d28d9; color:white; border:none; padding:8px; border-radius:4px; cursor:pointer;">Ø³ÙˆØ¨Ø± Ø£Ø¯Ù…Ù†</button>
                <button onclick="setUserRole(document.getElementById('otherUserDisplayName').textContent, 'admin')" style="background:#3b82f6; color:white; border:none; padding:8px; border-radius:4px; cursor:pointer;">Ø£Ø¯Ù…Ù†</button>
                <button onclick="setUserRole(document.getElementById('otherUserDisplayName').textContent, 'premium')" style="background:#10b981; color:white; border:none; padding:8px; border-radius:4px; cursor:pointer;">Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ…</button>
                <button onclick="setUserRole(document.getElementById('otherUserDisplayName').textContent, 'vip')" style="background:#f59e0b; color:black; border:none; padding:8px; border-radius:4px; cursor:pointer;">VIP</button>
                <button onclick="setUserRole(document.getElementById('otherUserDisplayName').textContent, 'guest')" style="background:#ef4444; color:white; border:none; padding:8px; border-radius:4px; cursor:pointer; grid-column: span 2;">Ø³Ø­Ø¨ Ø§Ù„Ø±ØªØ¨Ø©</button>
            </div>
        </div>
      </div>
    </div>
  </div>

  <div id="userProfilePanel" class="user-profile-panel">...</div>
  <div id="privateChatPanel" class="private-chat-panel">...</div>

  <script src="chat.js"></script>

  <!-- Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠ Ù„Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù„ÙˆØ­Ø© + Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ + Ø§Ù„Ù„ÙˆØ­Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const usersPanel = document.getElementById('usersPanel');
      const hideBtn = document.getElementById('hideUsersPanelBtn');
      const showBtn = document.getElementById('showUsersPanelBtn');
      hideBtn.addEventListener('click', () => {
        usersPanel.style.display = 'none';
        hideBtn.style.display = 'none';
        showBtn.style.display = 'inline-block';
      });
      showBtn.addEventListener('click', () => {
        usersPanel.style.display = 'block';
        showBtn.style.display = 'none';
        hideBtn.style.display = 'inline-block';
      });

      // Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±
      const coverUpload = document.getElementById('coverUpload');
      const myCoverPhoto = document.getElementById('myCoverPhoto');
      if (coverUpload && myCoverPhoto) {
        coverUpload.addEventListener('change', function(e) {
          const file = e.target.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = function(event) {
              myCoverPhoto.style.backgroundImage = `url(${event.target.result})`;
            };
            reader.readAsDataURL(file);
          }
        });
      }

      // ÙØªØ­ ÙˆØ¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ØªØ¬Ø±
      document.getElementById('shopBtn')?.addEventListener('click', () => {
        document.getElementById('shopPanel').style.display = 'block';
      });
      document.getElementById('closeShop')?.addEventListener('click', () => {
        document.getElementById('shopPanel').style.display = 'none';
      });

      // ÙØªØ­ ÙˆØ¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ù†Ù‚Ø§Ø·ÙŠ ÙˆÙ…Ø³ØªÙˆØ§ÙŠ
      const levelBtn = document.getElementById('myLevelBtn');
      const levelPanel = document.getElementById('levelPointsPanel');
      const closeLevel = document.querySelector('.close-level-panel');
      if (levelBtn && levelPanel) {
        levelBtn.addEventListener('click', () => {
          levelPanel.classList.remove('hidden');
          document.getElementById('myRealPoints').textContent = '1';
          document.querySelector('.current-level').textContent = '1';
          document.getElementById('nextLevelPoints').textContent = '100';
        });
      }
      if (closeLevel) {
        closeLevel.addEventListener('click', () => {
          levelPanel.classList.add('hidden');
        });
      }

      // â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
      // â•‘ Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© â•‘
      // â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      const emojiBtn = document.getElementById('emojiBtn');
      const emojiPicker = document.getElementById('emojiPicker');
      const messageInput = document.getElementById('messageInput');
      if (emojiBtn && emojiPicker && messageInput) {
        emojiBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          emojiPicker.classList.toggle('hidden');
        });
        document.addEventListener('click', (e) => {
          if (!emojiPicker.contains(e.target) && e.target !== emojiBtn) {
            emojiPicker.classList.add('hidden');
          }
        });
        document.querySelectorAll('.emoji-tab').forEach(tab => {
          tab.addEventListener('click', () => {
            document.querySelectorAll('.emoji-tab').forEach(t => t.classList.remove('active'));
            tab.classList.add('active');
            document.querySelectorAll('.emoji-grid').forEach(grid => grid.classList.add('hidden'));
            document.getElementById(`tab-${tab.dataset.tab}`).classList.remove('hidden');
          });
        });
        document.getElementById('tab-common')?.addEventListener('click', e => {
          if (e.target.tagName === 'SPAN') {
            insertAtCursor(messageInput, e.target.textContent.trim());
          }
        });
        document.getElementById('tab-animated')?.addEventListener('click', e => {
          if (e.target.tagName === 'IMG') {
            insertAtCursor(messageInput, e.target.alt);
          }
        });
        function insertAtCursor(input, text) {
          const start = input.selectionStart;
          const end = input.selectionEnd;
          input.value = input.value.substring(0, start) + text + input.value.substring(end);
          input.selectionStart = input.selectionEnd = start + text.length;
          input.focus();
        }
      }

      // â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
      // â•‘ ÙØªØ­ Ø§Ù„Ù„ÙˆØ­Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø§Ù„ØªÙŠ Ø·Ù„Ø¨ØªÙ‡Ø§ â•‘
      // â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      // 1. Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ø§Ù„Ø®Ø§ØµØ© (Ø²Ø± Ø§Ù„Ø¸Ø±Ù)
      document.getElementById('privateMsgBtn')?.addEventListener('click', () => {
        document.querySelectorAll('.conversations-panel, .friend-requests-panel, .reports-panel').forEach(p => p.style.display = 'none');
        const panel = document.getElementById('conversationsPanel');
        if (panel) {
          panel.style.display = 'block';
          // Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø·Ù„Ø¨ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±
          // socket.emit('get private conversations');
        }
      });

      // 2. Ù„ÙˆØ­Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØµØ¯Ø§Ù‚Ø©
      document.getElementById('friendReqBtn')?.addEventListener('click', () => {
        document.querySelectorAll('.conversations-panel, .friend-requests-panel, .reports-panel').forEach(p => p.style.display = 'none');
        const panel = document.getElementById('friendRequestsPanel');
        if (panel) {
          panel.style.display = 'block';
          // Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø·Ù„Ø¨ Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØµØ¯Ø§Ù‚Ø© Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±
          // socket.emit('get friend requests');
        }
      });

      // 3. Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¨Ù„Ø§ØºØ§Øª
      document.getElementById('reportsBtn')?.addEventListener('click', () => {
        document.querySelectorAll('.conversations-panel, .friend-requests-panel, .reports-panel').forEach(p => p.style.display = 'none');
        const panel = document.getElementById('reportsPanel');
        if (panel) {
          panel.style.display = 'block';
          // Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø¨Ù„Ø§ØºØ§Øª Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ± (Ù„Ù„Ø£Ø¯Ù…Ù† ÙÙ‚Ø·)
          // socket.emit('get reports');
        }
      });
    });
  </script>
</body>
</html>
